<!doctype html>{% load static %}{% load django_bootstrap5 %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The page supports both dark and light color schemes,
         and the page author prefers / default is light. -->
    <meta name="color-scheme" content="light dark">
    {% bootstrap_css %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <!-- reference your installed Font Awesome Free package's files here -->
    <link href="{% static 'fontawesomefree/css/all.min.css' %}" rel="stylesheet" type="text/css">
    <!-- Load the alternate CSS first ...
         in this case the Bootstrap-Dark Variant CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-night.min.css" rel="stylesheet"
          media="(prefers-color-scheme: dark)">
    <!-- and then the primary CSS last ...
         in this case the (original) Bootstrap Variant CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          media="(prefers-color-scheme: light)">

    <title>{{ app_name }}</title>
</head>
<body class="dark-mode with-custom-webkit-scrollbars with-custom-css-scrollbars" data-dm-shortcut-enabled="true"
      data-sidebar-shortcut-enabled="true">
<!-- Page wrapper start -->
<div id="page-wrapper" class="page-wrapper with-navbar with-navbar-fixed-bottom"
     data-sidebar-type="default">
    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <span class="navbar-brand">{{ app_name }} <small>v{{ app_version }}</small></span>
        </div>
    </nav>
    <!-- Content wrapper -->
    <div class="content-wrapper">
        <div class="container">
            <h4>Addresses <small><small class="fw-lighter">
                CHECK_INTERVALS: {{ CHECK_INTERVALS }}minutes</small></small>
            </h4>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Provider</th>
                    <th scope="col">IPv4 Previous Address</th>
                    <th scope="col">IPv4 Address</th>
                    <th scope="col">IPv4 Change Time</th>
                    <th scope="col">IPv6 Previous Address</th>
                    <th scope="col">IPv6 Address</th>
                    <th scope="col">IPv6 Change Time</th>
                </tr>
                </thead>
                <tbody>
                {% for item in addresses %}
                    <tr>
                        <th scope="row">{{ item.name }}</th>
                        <td>{{ item.provider }}</td>
                        <td>{{ item.ipv4_previous_address }}</td>
                        <td>{{ item.ipv4_last_address }}</td>
                        <td>{{ item.ipv4_last_change_time|timesince:now }}</td>
                        <td>{{ item.ipv6_previous_address }}</td>
                        <td>{{ item.ipv6_last_address }}</td>
                        <td>{{ item.ipv6_last_change_time|timesince:now }}</td>
                    </tr>
                {% empty %}
                    <th>Sorry, no data in this list.</th>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="container">
            <h4>Tasks <small><small class="fw-light">FORCE_UPDATE_INTERVALS: {{ FORCE_UPDATE_INTERVALS }}minutes</small></small>
            </h4>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Provider</th>
                    <th scope="col">Domain</th>
                    <th scope="col">Success</th>
                    <th scope="col">IP Addresses</th>
                    <th scope="col">Last Update Time</th>
                    <th scope="col">Last Success Time</th>
                </tr>
                </thead>
                <tbody>
                {% for item in tasks %}
                    <tr>
                        <th scope="row">{{ item.name }}</th>
                        <td>{{ item.provider }}</td>
                        <td>{{ item.full_domain }}</td>
                        <th scope="row">{% if item.last_update_success %}
                            <i class="bi bi-check-lg"></i> {% else %}
                            <i class="bi bi-x-lg"></i>{% endif %}
                        </th>
                        <td>{{ item.last_ip_addresses }}</td>
                        <td>{{ item.last_update_time|timesince:now }}</td>
                        <td>{{ item.last_update_success_time|timesince:now }}</td>
                    </tr>
                {% empty %}
                    <th>Sorry, no data in this list.</th>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="container">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th scope="col">Timestamp</th>
                    <th scope="col">Level</th>
                    <th scope="col">Message</th>
                </tr>
                </thead>
                <tbody>
                {% for item in events %}
                    <tr {% if item.highlight %} bgcolor="orange" {% endif %}>
                        <td>{{ item.time }}</td>
                        <td>{{ item.level }}</td>
                        <td>{{ item.message }}</td>
                    </tr>
                {% empty %}
                    <th>Sorry, no data in this list.</th>
                {% endfor %}
                </tbody>
            </table>
        </div>

    </div>

    <footer>
        <hr>
        <div class="container font-monospace">
            OpenAPI <a href="/api/docs">Docs</a>/<a href="/api_example">Example</a> | <a
                href="{{ app_url }}">GitHub</a>
        </div>
    </footer>
</div>
{% bootstrap_javascript %}
</body>
</html>